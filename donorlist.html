<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü | ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶´‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∂‡¶®</title>
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2966/2966327.png">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Noto Sans Bengali',sans-serif;}
body{background:#fffaf9;color:#333;overflow-x:hidden;}
header{
  background:linear-gradient(135deg,#d32f2f,#ff5252);
  color:white;
  padding:20px 10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
header h1{font-size:22px;margin-left:10px;}
header img{width:40px;height:40px;border-radius:50%;margin-right:10px;}
nav{
  background:#fff;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
}
nav a{
  padding:12px 18px;
  text-decoration:none;
  color:#c4001d;
  font-weight:600;
  transition:0.3s;
}
nav a:hover, nav a.active{background:#ffebee;color:#b71c1c;}

.section{
  padding:25px;
  text-align:center;
}
h2{color:#c4001d;margin-bottom:15px;font-size:20px;}

/* Filter */
select{
  padding:10px 18px;
  border:none;
  border-radius:25px;
  background:linear-gradient(90deg,#e63946,#f77f00);
  color:white;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
  margin-top:10px;
}
select option{color:#000;}

.donor-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:20px;
  margin-top:25px;
}
.donor-card{
  background:white;
  border-radius:15px;
  padding:20px 10px;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
  transition:0.3s;
}
.donor-card:hover{transform:scale(1.05);}
.donor-card img{
  width:100px;height:100px;
  border-radius:50%;
  border:3px solid #e63946;
  object-fit:cover;
  margin-bottom:8px;
  animation:pulse 3s infinite;
}
@keyframes pulse{
  0%{transform:scale(1);}
  50%{transform:scale(1.05);}
  100%{transform:scale(1);}
}
.available{color:#2a9d8f;font-weight:bold;}
.remaining{color:#e76f51;}
footer{
  background:#d32f2f;
  color:white;
  text-align:center;
  padding:10px;
  margin-top:25px;
}

/* Modal */
.modal{
  display:none;
  position:fixed;
  z-index:100;
  left:0;top:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.6);
  backdrop-filter:blur(4px);
}
.modal-content{
  background:#fff;
  margin:10% auto;
  padding:25px;
  border-radius:15px;
  width:90%;max-width:420px;
  text-align:center;
  box-shadow:0 6px 12px rgba(0,0,0,0.3);
}
.modal-content img{
  width:120px;height:120px;
  border-radius:50%;
  border:3px solid #e63946;
  margin-bottom:10px;
}
.close{
  color:#e63946;
  float:right;
  font-size:26px;
  cursor:pointer;
}
.close:hover{color:#000;}
</style>
</head>
<body>


<!-- ü©∏ Header Section -->
<header>
  <div style="display:flex;align-items:center;">
    <img src="https://cdn-icons-png.flaticon.com/512/2966/2966327.png" alt="logo">
    <h1>‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶´‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∂‡¶®</h1>
  </div>
</header>

<!-- üß≠ Navigation Menu -->
<nav>
  <a href="index.html" class="active">üè† ‡¶π‡ßã‡¶Æ</a>
  <a href="register.html">ü©∏ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</a>
  <a href="donorlist.html">üìã ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</a>
  <a href="donor-card.html">ü™™ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶°</a>
  <a href="login.html">üîê ‡¶≤‡¶ó‡¶á‡¶®</a>
  <a href="contact.html">üìû ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó</a>
</nav>

<!-- Donor List Section -->
<section class="section">
  <h2>ü©∏ ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ‡¶¶‡ßá‡¶∞ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h2>
  <p>‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®:</p>
  <select id="filter">
    <option value="all">‡¶∏‡¶¨</option>
    <option value="A+">A+</option>
    <option value="A-">A-</option>
    <option value="B+">B+</option>
    <option value="B-">B-</option>
    <option value="O+">O+</option>
    <option value="O-">O-</option>
    <option value="AB+">AB+</option>
    <option value="AB-">AB-</option>
  </select>
  <div id="donorList" class="donor-grid">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
</section>
<footer>
  ¬© ‡ß®‡ß¶‡ß®‡ß™- ‡ß®‡ß¶‡ß®‡ß´ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶´‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∂‡¶® | Developed by Bright IT
</footer>

<!-- Modal -->
<div id="donorModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <img id="modalPhoto" src="" alt="Donor Photo">
    <h3 id="modalName"></h3>
    <p id="modalBlood"></p>
    <p id="modalAge"></p>
    <p id="modalAddress"></p>
  </div>
</div>

<script>
const SHEET_URL = "https://script.google.com/macros/s/AKfycbwZcFwXtuj6EIem_nOoTn7DcWqt-XKDSQ1xog9f6O05IGUCgKwoBgsHHLGJvvMnybk/exec";
let allDonors = [];

function calculateAge(birthDate){
  const birth = new Date(birthDate);
  if(isNaN(birth)) return null;
  const today=new Date();
  let age=today.getFullYear()-birth.getFullYear();
  const m=today.getMonth()-birth.getMonth();
  if(m<0||(m===0&&today.getDate()<birth.getDate())) age--;
  return age;
}

async function loadDonors(){
  const container=document.getElementById("donorList");
  container.innerHTML="‚è≥ ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...";
  try{
    const res=await fetch(SHEET_URL);
    const donors=await res.json();
    allDonors=donors;
    showDonors("all");
  }catch(err){
    console.error(err);
    container.innerHTML="<p style='color:red;'>‚ö†Ô∏è ‡¶°‡ßá‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!</p>";
  }
}

function showDonors(group){
  const container=document.getElementById("donorList");
  container.innerHTML="";
  let filtered=group==="all"?allDonors:allDonors.filter(d=>{
    const blood=(d.Blood||"").trim().toUpperCase();
    return blood===group;
  });
  if(filtered.length===0){container.innerHTML="<p>‡¶ï‡ßã‡¶®‡ßã ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶§‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§</p>";return;}
  filtered.forEach((d,i)=>{
    const name=d.Name||"‡¶®‡¶æ‡¶Æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø";
    const blood=d.Blood||"‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ";
    const total=d.TotalDonate||0;
    const photo=d.Photo||"https://cdn-icons-png.flaticon.com/512/9131/9131529.png";
    const last=d.LastDonate||"‡¶§‡¶•‡ßç‡¶Ø ‡¶®‡ßá‡¶á";
    const address=d.Address||"‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø";
    container.innerHTML+=`
      <div class="donor-card">
        <img src="${photo}" alt="${name}" onclick="openModal(${i})">
        <h4>${name}</h4>
        <p>‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™: ${blood} ‚Äî ${total} ‡¶¨‡¶æ‡¶∞</p>
        <p>üóì ‡¶∏‡¶∞‡ßç‡¶¨‡¶∂‡ßá‡¶∑ ‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®: ${last}</p>
      </div>`;
  });
}

function openModal(index){
  const d=allDonors[index];
  document.getElementById("modalPhoto").src=d.Photo||"https://cdn-icons-png.flaticon.com/512/9131/9131529.png";
  document.getElementById("modalName").innerText=d.Name;
  document.getElementById("modalBlood").innerText="‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™: "+(d.Blood||"‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ");
  document.getElementById("modalAddress").innerText="‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ: "+(d.Address||"‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ");
  document.getElementById("donorModal").style.display="block";
}
document.querySelector(".close").onclick=()=>document.getElementById("donorModal").style.display="none";
window.onclick=e=>{if(e.target==document.getElementById("donorModal"))document.getElementById("donorModal").style.display="none";}
document.getElementById("filter").addEventListener("change",e=>showDonors(e.target.value));
loadDonors();
</script>
</body>
</html>
