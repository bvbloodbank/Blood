<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶´‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∂‡¶®</title>
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2966/2966327.png">
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600&display=swap');
*{margin:0;padding:0;box-sizing:border-box;font-family:'Noto Sans Bengali',sans-serif;}
body{background:#fffaf9;color:#333;overflow-x:hidden;}
header{
  background:linear-gradient(135deg,#d32f2f,#ff5252);
  color:white;
  padding:20px 10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
header h1{font-size:22px;margin-left:10px;}
header img{width:40px;height:40px;border-radius:50%;margin-right:10px;}
nav{
  background:#fff;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
}
nav a{
  padding:12px 18px;
  text-decoration:none;
  color:#c4001d;
  font-weight:600;
  transition:0.3s;
}
nav a:hover, nav a.active{background:#ffebee;color:#b71c1c;}

.stats{
  display:flex;
  justify-content:space-around;
  flex-wrap:wrap;
  background:#fff;
  margin:15px;
  padding:15px 5px;
  border-radius:12px;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}
.stat-box{
  text-align:center;
  flex:1 1 120px;
  margin:10px;
  background:#fff5f5;
  border-radius:10px;
  padding:15px;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
}
.stat-box h2{color:#d32f2f;margin-bottom:5px;}
.stat-box p{font-size:14px;color:#555;}

.section{padding:20px;text-align:center;}
.section h2{color:#c4001d;margin-bottom:15px;font-size:20px;}
.donor-grid{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:20px;
}
.donor-card{
  background:white;
  width:130px;
  border-radius:16px;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
  padding:10px;
  text-align:center;
  transition:transform 0.3s;
  animation:pop 1.2s ease;
}
.donor-card:hover{transform:scale(1.05);}
.donor-card img{
  width:80px;height:80px;border-radius:50%;
  border:3px solid #ff4d4d;
  object-fit:cover;
  margin-bottom:8px;
}
@keyframes pop{
  0%{transform:scale(0.6);opacity:0;}
  100%{transform:scale(1);opacity:1;}
}
footer{
  background:#d32f2f;
  color:white;
  text-align:center;
  padding:10px;
  margin-top:25px;
}
</style>
</head>
<body>

<!-- ü©∏ Header Section -->
<header>
  <div style="display:flex;align-items:center;">
    <img src="https://cdn-icons-png.flaticon.com/512/2966/2966327.png" alt="logo">
    <h1>‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶´‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∂‡¶®</h1>
  </div>
</header>

<!-- üß≠ Navigation Menu -->
<nav>
  <a href="index.html" class="active">üè† ‡¶π‡ßã‡¶Æ</a>
  <a href="register.html">ü©∏ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®</a>
  <a href="donorlist.html">üìã ‡¶°‡ßã‡¶®‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü</a>
  <a href="donor-card.html">ü™™ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶ï‡¶æ‡¶∞‡ßç‡¶°</a>
  <a href="login.html">üîê ‡¶≤‡¶ó‡¶á‡¶®</a>
  <a href="contact.html">üìû ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó</a>
</nav>

<!-- üìä Summary Stats -->
<section class="stats">
  <div class="stat-box">
    <h2 id="totalDonors">0</h2>
    <p>‡¶Æ‡ßã‡¶ü ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶æ‡¶§‡¶æ</p>
  </div>
  <div class="stat-box">
    <h2 id="totalDonation">0</h2>
    <p>‡¶Æ‡ßã‡¶ü ‡¶°‡ßã‡¶®‡ßá‡¶∂‡¶®</p>
  </div>
  <div class="stat-box">
    <h2 id="todayDonation">0</h2>
    <p>‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶¶‡¶æ‡¶®</p>
  </div>
</section>

<!-- ‡¶®‡¶§‡ßÅ‡¶® ‡¶°‡ßã‡¶®‡¶æ‡¶∞ -->
<section class="section">
  <h2>ü©∏ ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶æ‡¶§‡¶æ</h2>
  <div id="newDonors" class="donor-grid"></div>
</section>

<!-- ‡¶ü‡¶™ ‡¶°‡ßã‡¶®‡¶æ‡¶∞ -->
<section class="section">
  <h2>üèÜ ‡¶ü‡¶™ ‡¶°‡ßã‡¶®‡¶æ‡¶∞</h2>
  <div id="topDonors" class="donor-grid"></div>
</section>

<footer>
  ¬© ‡ß®‡ß¶‡ß®‡ß™- ‡ß®‡ß¶‡ß®‡ß´ ‡¶∞‡¶ï‡ßç‡¶§ ‡¶¶‡¶æ‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶´‡¶æ‡¶â‡¶®‡ßç‡¶°‡ßá‡¶∂‡¶® | Developed by Bright IT
</footer>

<script>
const SHEET_URL = "YOUR_GOOGLE_APPS_SCRIPT_URL"; // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶¶‡¶æ‡¶ì

async function loadData(){
  try {
    const res = await fetch(SHEET_URL);
    const data = await res.json();

    if (!Array.isArray(data)) return;

    const totalDonors = data.length;
    const totalDonation = data.reduce((sum,d)=>sum+(+d.TotalDonate||0),0);

    const today = new Date().toISOString().split('T')[0];
    const todayDonation = data.filter(d=>new Date(d.LastDonate).toISOString().split('T')[0]===today).length;

    document.getElementById("totalDonors").innerText = totalDonors;
    document.getElementById("totalDonation").innerText = totalDonation;
    document.getElementById("todayDonation").innerText = todayDonation;

    const newDonors = data.slice(-4).reverse();
    const topDonors = [...data].sort((a,b)=>b.TotalDonate - a.TotalDonate).slice(0,4);

    renderDonors("newDonors", newDonors, false);
    renderDonors("topDonors", topDonors, true);
  } catch (err) {
    console.error("Error:", err);
  }
}

function renderDonors(elementId, donors, showTotal){
  const container = document.getElementById(elementId);
  container.innerHTML = "";
  donors.forEach(d=>{
    container.innerHTML += `
      <div class="donor-card">
        <img src="${d.Photo || 'https://cdn-icons-png.flaticon.com/512/3135/3135715.png'}" alt="${d.Name}">
        <h4>${d.Name}</h4>
        <p>${d.Blood}</p>
        ${showTotal ? `<small>‡¶Æ‡ßã‡¶ü ‡¶¶‡¶æ‡¶®: ${d.TotalDonate}</small>` : ""}
      </div>
    `;
  });
}

loadData();
</script>

</body>
</html>
